# 智能文本助手 Chrome 插件

## 项目简介

智能文本助手是一款功能强大的Chrome浏览器插件，为用户提供智能文本处理功能。当您在网页上选中文本时，插件会自动显示悬浮工具栏，提供文本解释、翻译、朗读和润色等功能。

## 主要功能

### 🔍 文本解释
- 智能解释选中的文本内容
- 提供详细的背景信息和含义说明
- 支持中英文文本解释

### 🌐 文本翻译
- 支持中英文双向翻译
- 智能语言检测
- 翻译结果准确流畅

### 🔊 文本朗读
- 使用Chrome内置TTS引擎
- 支持中英文朗读
- 自动语言检测和语音选择

### ✏️ 文本润色
- 智能优化文本表达
- 提供可编辑的润色结果
- 支持一键替换原文

### 📊 网页总结
- 智能分析整个网页内容
- 提取主要观点和关键信息
- 生成结构化思维导图
- 支持导出和分享

## 技术特性

- **现代化UI设计**：采用扁平化设计风格，界面简洁美观
- **响应式布局**：适配不同屏幕尺寸
- **智能定位**：悬浮框自动定位在选中文本上方
- **多语言支持**：完整的中英文界面
- **无障碍设计**：支持键盘导航和屏幕阅读器
- **性能优化**：轻量级实现，不影响页面性能

## 安装步骤

### 方法一：开发者模式安装（推荐）

1. **下载插件文件**
   - 下载本项目的所有文件到本地文件夹
   - 确保文件夹包含以下文件：
     ```
     chajian/
     ├── manifest.json
     ├── config.js
     ├── content.js
     ├── background.js
     ├── popup.html
     ├── popup.js
     ├── styles.css
     ├── mindmap.html
     ├── test-page.html
     ├── icons/
     │   ├── icon16.png
     │   ├── icon48.png
     │   └── icon128.png
     └── README.md
     ```

2. **配置API密钥**
   - 打开 `config.js` 文件
   - 将 `your_kimi_api_key_here` 替换为您的实际Kimi API Key
   - 保存文件

3. **在Chrome中安装**
   - 打开Chrome浏览器
   - 在地址栏输入 `chrome://extensions/`
   - 开启右上角的"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择包含插件文件的文件夹
   - 插件安装完成

### 方法二：打包安装

1. **打包插件**
   - 在Chrome扩展程序页面点击"打包扩展程序"
   - 选择插件文件夹
   - 生成 `.crx` 文件

2. **安装打包文件**
   - 将生成的 `.crx` 文件拖拽到Chrome扩展程序页面
   - 确认安装

## 配置说明

### Kimi API 配置

插件使用Kimi API提供智能文本处理功能，需要配置API密钥：

1. **获取API密钥**
   - 访问 [Kimi官网](https://kimi.moonshot.cn/)
   - 注册并登录账户
   - 在开发者设置中获取API Key

2. **配置API密钥**
   - 编辑 `config.js` 文件
   - 替换 `KIMI_API_KEY` 的值
   - 保存文件并重启插件

### 配置文件结构

```javascript
const CONFIG = {
  // Kimi API 基础URL
  KIMI_API_URL: "https://kimi.moonshot.cn/api/chat-messages",
  
  // Kimi API Key - 请替换为您的实际API Key
  KIMI_API_KEY: "your_kimi_api_key_here",
  
  // 请求头配置
  HEADERS: {
    "Content-Type": "application/json",
    "Authorization": "Bearer your_kimi_api_key_here"
  },
  
  // 功能提示词配置
  PROMPTS: {
    EXPLAIN: "请详细解释以下文本的含义和背景：",
    TRANSLATE_TO_CN: "请将以下英文文本翻译成中文，保持原意准确：",
    TRANSLATE_TO_EN: "请将以下中文文本翻译成英文，保持原意准确：",
    POLISH: "请对以下文本进行润色和优化，使其更加流畅、准确和易读：",
    SUMMARIZE: "请对以下网页内容进行总结，提取主要观点和关键信息，并按照逻辑结构组织："
  }
};
```

## 使用方法

### 基本操作

1. **启用插件**
   - 点击Chrome工具栏中的插件图标
   - 确保插件状态为"已启用"

2. **选择文本**
   - 在任意网页上选中要处理的文本
   - 悬浮工具栏会自动出现在选中文本上方

3. **使用功能**
   - **解释**：点击解释按钮获取文本详细说明
   - **翻译**：点击翻译按钮，选择目标语言
   - **朗读**：点击朗读按钮开始语音播放
   - **润色**：点击润色按钮获取优化建议
   - **总结**：点击总结按钮分析整个网页内容

### 高级功能

#### 翻译功能
- 点击翻译按钮显示语言选择下拉菜单
- 选择"翻译为中文"或"翻译为英文"
- 翻译结果会显示原文和译文对比

#### 润色功能
- 润色结果支持在线编辑
- 点击"复制结果"复制到剪贴板
- 点击"替换原文"直接替换页面中的文本

#### 朗读控制
- 朗读过程中按钮会显示停止图标
- 再次点击可停止朗读
- 支持中英文自动语言检测

#### 网页总结
- 自动分析整个网页内容
- 智能提取主要观点和关键信息
- 生成结构化总结报告
- 支持思维导图可视化
- 可导出为图片格式

### 快捷键

- **ESC**：关闭所有结果面板
- **Tab**：在插件元素间导航
- **Enter**：激活按钮功能

## 故障排除

### 常见问题

1. **插件不显示悬浮框**
   - 检查插件是否已启用
   - 确认在支持的网页上使用
   - 尝试刷新页面

2. **API请求失败**
   - 检查 `config.js` 中的API Key配置
   - 确认网络连接正常
   - 验证API Key是否有效

3. **朗读功能不工作**
   - 检查浏览器是否支持TTS
   - 确认系统音频设备正常
   - 尝试在其他页面测试

4. **样式显示异常**
   - 清除浏览器缓存
   - 重新加载插件
   - 检查是否有其他插件冲突

5. **思维导图无法显示**
   - 确保 `mindmap.html` 和 `mindmap.js` 文件存在
   - 检查浏览器控制台是否有错误信息
   - 尝试使用测试页面验证功能

### 调试方法

1. **查看控制台日志**
   - 按F12打开开发者工具
   - 查看Console标签页的错误信息

2. **检查插件状态**
   - 访问 `chrome://extensions/`
   - 查看插件是否正常运行
   - 点击"错误"按钮查看详细错误

3. **重新安装插件**
   - 卸载现有插件
   - 删除插件文件夹
   - 重新下载并安装

## 开发信息

### 技术栈

- **前端**：原生JavaScript、CSS3、HTML5
- **API**：Kimi AI API
- **图形库**：原生JavaScript实现（思维导图）
- **浏览器API**：Chrome Extension API、Web Speech API

### 文件结构

```
chajian/
├── manifest.json          # 插件配置文件
├── config.js             # API配置文件
├── content.js            # 内容脚本（主要功能）
├── background.js         # 后台脚本
├── popup.html            # 弹出窗口HTML
├── popup.js              # 弹出窗口脚本
├── styles.css            # 样式文件
├── mindmap.html          # 思维导图页面
├── mindmap.js            # 思维导图脚本
├── test-page.html        # 测试页面
├── test-mindmap.html     # 思维导图测试页面
├── icons/                # 图标文件夹
│   ├── icon16.png        # 16x16图标
│   ├── icon48.png        # 48x48图标
│   └── icon128.png       # 128x128图标
└── README.md             # 说明文档
```

### 开发环境

- Chrome浏览器 88+
- 支持ES6+语法
- 需要有效的Kimi API Key

## 更新日志

### v1.1.1 (2024-01-XX)
- 修复Content Security Policy (CSP) 错误
- 移除外部依赖，使用原生JavaScript实现思维导图
- 优化思维导图性能和兼容性
- 添加思维导图测试页面

### v1.1.0 (2024-01-XX)
- 新增网页总结功能
- 集成思维导图可视化
- 支持思维导图导出为图片
- 优化页面内容提取算法

### v1.0.0 (2024-01-01)
- 初始版本发布
- 实现文本解释、翻译、朗读、润色功能
- 支持中英文处理
- 现代化UI设计

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 联系方式

如有问题或建议，请通过以下方式联系：

- 提交GitHub Issue
- 发送邮件至：[您的邮箱]

---

**注意**：使用本插件需要有效的Kimi API Key，请确保遵守相关服务条款和API使用限制。 